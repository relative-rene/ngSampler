"use strict";(self.webpackChunkngSampler=self.webpackChunkngSampler||[]).push([[719],{4719:(y,g,a)=>{a.r(g),a.d(g,{acgRoutes:()=>F});var i=a(5279),d=a(9862),l=a(6814),p=a(95),e=a(5879),u=a(5495);function m(t,s){if(1&t&&(e.TgZ(0,"option",5),e._uU(1),e.qZA()),2&t){const n=s.$implicit;e.Q6J("value",n.description),e.xp6(1),e.Oqu(n.description)}}function Z(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"select",3),e.NdJ("change",function(r){e.CHM(n);const c=e.oxw();return e.KtG(c.onSelect(r,c.novel.title))}),e.YNc(1,m,2,2,"option",4),e.qZA()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.options)}}let _=(()=>{var t;class s{constructor(o,r,c){this.router=o,this.acgService=r,this.route=c,this.options=[],this.ChaptersLoaded=!1,this.myControl=new p.NI}navigateTo(o){this.router.navigate(["chapters/"+o],{relativeTo:this.route})}getChapters(o){console.log("novel_id",o),this.acgService.getChaptersList(o).subscribe(r=>this.options=A(r))}onSelect(o,r){o.currentTarget&&this.router.navigate([r+"/"+o.currentTarget.value],{relativeTo:this.route})}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(u.F0),e.Y36(i.a),e.Y36(u.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["acg-novel"]],inputs:{novel:"novel"},standalone:!0,features:[e.jDz],decls:38,vars:7,consts:[[1,"novel-container"],[1,"btn","primary",3,"click"],[3,"change",4,"ngIf"],[3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"h5"),e._uU(2,"title: "),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"h5"),e._uU(7,"description: "),e.qZA(),e.TgZ(8,"p"),e._uU(9),e.qZA(),e._UZ(10,"br"),e.TgZ(11,"h5"),e._uU(12,"author: "),e.qZA(),e.TgZ(13,"p"),e._uU(14),e.qZA(),e._UZ(15,"br"),e.TgZ(16,"h5"),e._uU(17,"genre: "),e.qZA(),e.TgZ(18,"p"),e._uU(19),e.qZA(),e._UZ(20,"br"),e.TgZ(21,"h5"),e._uU(22,"source: "),e.qZA(),e.TgZ(23,"p"),e._uU(24),e.qZA(),e._UZ(25,"br"),e.TgZ(26,"h5"),e._uU(27,"status: "),e.qZA(),e.TgZ(28,"p"),e._uU(29),e.qZA(),e._UZ(30,"br"),e.TgZ(31,"button",1),e.NdJ("click",function(){return r.navigateTo(r.novel.title)}),e._uU(32,"Start"),e.qZA(),e._UZ(33,"br"),e.TgZ(34,"button",1),e.NdJ("click",function(){return r.getChapters(r.novel.title)}),e._uU(35,"Fetch Data"),e.qZA(),e._UZ(36,"br"),e.YNc(37,Z,2,1,"select",2),e.qZA()),2&o&&(e.xp6(4),e.Oqu(r.novel.title),e.xp6(5),e.Oqu(r.novel.description),e.xp6(5),e.Oqu(r.novel.author),e.xp6(5),e.Oqu(r.novel.genre),e.xp6(5),e.Oqu(r.novel.source),e.xp6(5),e.Oqu(r.novel.status),e.xp6(8),e.Q6J("ngIf",r.options.length))},dependencies:[l.ez,l.sg,l.O5,p.UX,p.YN,p.Kr],encapsulation:2}),s})();const A=t=>t.sort((s,n)=>Number(s.description.split(" ")[1])-Number(n.description.split(" ")[1]));function T(t,s){if(1&t&&(e.TgZ(0,"div"),e._UZ(1,"acg-novel",1),e.qZA()),2&t){const n=s.$implicit;e.xp6(1),e.Q6J("novel",n)}}let C=(()=>{var t;class s{constructor(o){this.acgService=o}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(i.a))},t.\u0275cmp=e.Xpm({type:t,selectors:[["acg-novels"]],standalone:!0,features:[e.jDz],decls:5,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"novel"]],template:function(o,r){1&o&&(e.TgZ(0,"h2"),e._uU(1,"Novels"),e.qZA(),e._UZ(2,"br"),e.YNc(3,T,2,1,"div",0),e.ALo(4,"async")),2&o&&(e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,1,r.acgService.getAllNovels())))},dependencies:[l.ez,l.sg,l.Ov,_],encapsulation:2}),s})(),U=(()=>{var t;class s{constructor(o){this.acgService=o}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(i.a))},t.\u0275cmp=e.Xpm({type:t,selectors:[["acg"]],standalone:!0,features:[e._Bn([i.a]),e.jDz],decls:4,vars:0,consts:[[1,"main"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"ACG"),e.qZA(),e._UZ(3,"acg-novels"),e.qZA())},dependencies:[l.ez,d.JF,C],styles:[".novel-container[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap}"]}),s})(),N=(()=>{var t;class s{constructor(){}}return(t=s).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["acg-chapter"]],inputs:{chapter:"chapter"},standalone:!0,features:[e.jDz],decls:3,vars:1,consts:[[1,"chapter-container"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"p"),e._uU(2),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(r.chapter.content))},encapsulation:2}),s})(),q=(()=>{var t;class s{constructor(o){this.el=o,this.scrolledToBottom=new e.vpe,new IntersectionObserver(c=>{c.forEach(O=>{O.isIntersecting&&this.scrolledToBottom.emit()})}).observe(this.el.nativeElement)}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(e.SBq))},t.\u0275dir=e.lG2({type:t,selectors:[["","infinite-scroll",""]],outputs:{scrolledToBottom:"scrolledToBottom"},standalone:!0}),s})();function b(t,s){if(1&t){const n=e.EpF();e.TgZ(0,"acg-chapter",1),e.NdJ("scrolledToBottom",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.loadMoreChapters())}),e.qZA()}2&t&&e.Q6J("chapter",s.$implicit)}let h=(()=>{var t;class s{constructor(o){this.acgService=o,this.route=(0,e.f3M)(u.gz)}ngOnInit(){this.route.data.subscribe(({data:o})=>this.chapters=o)}loadMoreChapters(){if(this.chapters.length){let o=this.chapters.slice(-1)[0],r="Chapter "+(Number(o.description.split(" ")[1])+1);this.acgService.getChapter(o.novel_id,r).subscribe(c=>this.chapters.push(c[0])),console.log("loadMoreChapters")}}}return(t=s).\u0275fac=function(o){return new(o||t)(e.Y36(i.a))},t.\u0275cmp=e.Xpm({type:t,selectors:[["acg-chapters"]],standalone:!0,features:[e.jDz],decls:5,vars:1,consts:[["infinite-scroll","",3,"chapter","scrolledToBottom",4,"ngFor","ngForOf"],["infinite-scroll","",3,"chapter","scrolledToBottom"]],template:function(o,r){1&o&&(e.TgZ(0,"h1"),e._uU(1,"Chapters"),e.qZA(),e._UZ(2,"br"),e.TgZ(3,"div"),e.YNc(4,b,1,1,"acg-chapter",0),e.qZA()),2&o&&(e.xp6(4),e.Q6J("ngForOf",r.chapters))},dependencies:[N,l.ez,l.sg,q],encapsulation:2}),s})();var v=a(9397),f=a(940);const F=[{path:"",component:U},{path:"chapters/:novel_id",component:h,resolve:{data:(t,s,n=(0,e.f3M)(i.a))=>n.getAllChaptersFromNovel(t.paramMap.get("novel_id")).pipe((0,v.b)(o=>!!o),(0,f.d)(1))}},{path:":novel_id/:description",component:h,resolve:{data:(t,s,n=(0,e.f3M)(i.a))=>n.getChapter(t.paramMap.get("novel_id"),t.paramMap.get("description")).pipe((0,v.b)(o=>!!o),(0,f.d)(1))}}]}}]);